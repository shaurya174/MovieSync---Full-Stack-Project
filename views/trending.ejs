<%-include('partials/header')%>

  <link rel="stylesheet" href="/css/tstyle.css">
</head>
<body>
<!-- üåå Vanta Background -->
<div id="vanta-bg"></div>

<!-- üåü Navbar -->
<%- include('partials/navbar') %>


<!-- üé• Trending Section -->
<div class="container mt-5">
  <div class="d-flex justify-content-between align-items-center flex-wrap mb-4">
    <h2 class="text-white">üé¨ Top Trending Movies</h2>
    <div class="d-flex align-items-center">
      <label for="sortDropdown" class="me-2 text-white fw-semibold">Sort By:</label>
      <select class="form-select" id="sortDropdown" style="width: 180px;">
        <option value="default" selected>Default</option>
        <option value="popularity">Popularity</option>
        <option value="release">Release Date</option>
      </select>  
    </div>
  </div>

  <div class="row">
    <!-- Movie Card 1 -->
     <%for(let i = 0;i<movies.length;i++){%> 
        <div class="col-md-6 mb-4">
          <div class="movie-card">
            <div class="movie-backdrop" style="background-image: url('https://image.tmdb.org/t/p/w780<%= movies[i].backdrop_path %>');">
              <span class="rank-number">#<%= i+1 %></span>
              <div class="backdrop-overlay"></div>
              <img class="poster" src="https://image.tmdb.org/t/p/w500<%= movies[i].poster_path %>" alt="" />
            </div>
          <div class="movie-content">
            <h2 class="movie-title"><%= movies[i].title %></h2>
            <p class="movie-info">
              üóìÔ∏è <%= movies[i].release_date %><br>
              ‚≠ê <%= movies[i].vote_average %> / 10 (<%= movies[i].vote_count %> votes)<br>
              üé≠ <%= ids[i] %>
            </p>
            <p class="movie-overview">
            <%= movies[i].overview %>
            </p>
          </div>
        </div>
        </div>
    <%}%>
 </div>

</div>

<!-- Footer -->
<%-include('partials/footer')%>
</script>
<script>
  document.getElementById('sortDropdown').addEventListener('change', function () {
    const selectedValue = this.value;
    const routes = {
      popularity: '/trending/sort/popularity',
      release: '/trending/sort/release',
      default: '/trending'                              
    };

    // Redirect to the appropriate GET route
    window.location.href = routes[selectedValue];
  });
</script>
</body>
</html>
